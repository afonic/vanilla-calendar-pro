/*! name: vanilla-calendar-pro v3.0.0-beta.16 | url: https://github.com/uvarov-frontend/vanilla-calendar-pro */
var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__spreadValues=(e,t)=>{for(var a in t||(t={}))__hasOwnProp.call(t,a)&&__defNormalProp(e,a,t[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(t))__propIsEnum.call(t,a)&&__defNormalProp(e,a,t[a]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__publicField=(e,t,a)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,a),a);const errorMessages={notFoundSelector:e=>`${e} is not found, check the first argument passed to new VanillaCalendarPro.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:"You specified an incorrect language label or did not specify the required number of values ​​for «locale.weekdays» or «locale.months».",incorrectTime:"The value of the time property can be: false, 12 or 24."},destroy=e=>{var t,a,i,n,r;if(!e.private.isInit)throw new Error(errorMessages.notInit);e.isInput?(null==(t=e.private.mainElement.parentElement)||t.removeChild(e.private.mainElement),null==(i=null==(a=e.private.inputElement)?void 0:a.replaceWith)||i.call(a,e.private.originalElement),e.private.inputElement=void 0):null==(r=(n=e.private.mainElement).replaceWith)||r.call(n,e.private.originalElement),e.private.mainElement=e.private.originalElement,e.onDestroy&&e.onDestroy(e)},hide=e=>{e.private.currentType&&(e.private.mainElement.dataset.vcCalendarHidden="",e.onHide&&e.onHide(e))};function getOffset(e){if(!e||!e.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const t=e.getBoundingClientRect(),a=document.documentElement;return{bottom:t.bottom,right:t.right,top:t.top+window.scrollY-a.clientTop,left:t.left+window.scrollX-a.clientLeft}}function getViewportDimensions(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function getWindowScrollPosition(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function calculateAvailableSpace(e){const{top:t,left:a}=getWindowScrollPosition(),{top:i,left:n}=getOffset(e),{vh:r,vw:l}=getViewportDimensions(),s=i-t,o=n-a;return{top:s,bottom:r-(s+e.clientHeight),left:o,right:l-(o+e.clientWidth)}}function getAvailablePosition(e,t,a=5){const i={top:!0,bottom:!0,left:!0,right:!0},n=[];if(!t||!e)return{canShow:i,parentPositions:n};const{bottom:r,top:l}=calculateAvailableSpace(e),{top:s,left:o}=getOffset(e),{height:d,width:c}=t.getBoundingClientRect(),{vh:p,vw:u}=getViewportDimensions(),v=u/2,m=p/2;return[{condition:s<m,position:"top"},{condition:s>m,position:"bottom"},{condition:o<v,position:"left"},{condition:o>v,position:"right"}].forEach((({condition:e,position:t})=>{e&&n.push(t)})),Object.assign(i,{top:d<=l-a,bottom:d<=r-a,left:c<=o,right:c<=u-o}),{canShow:i,parentPositions:n}}const handleDay=(e,t,a,i)=>{var n;const r=i.querySelector(`[data-vc-date="${t}"]`);if(!r)return;const l=r.querySelector("[data-vc-date-btn]");if((null==a?void 0:a.modifier)&&l.classList.add(...a.modifier.trim().split(" ")),null==a?void 0:a.html){const t=document.createElement("div");t.className=e.styles.datePopup,t.dataset.vcDatePopup="",t.innerHTML=e.sanitizerHTML(a.html),l.ariaExpanded="true",l.ariaLabel=`${l.ariaLabel}, ${null==(n=null==t?void 0:t.textContent)?void 0:n.replace(/^\s+|\s+(?=\s)|\s+$/g,"").replace(/&nbsp;/g," ")}`,r.appendChild(t),setTimeout((()=>{if(t){const{canShow:e}=getAvailablePosition(r,t),a=5;let i=r.offsetHeight,n=0;e.bottom||(i=-t.offsetHeight-a),e.left&&!e.right&&(n=r.offsetWidth-t.offsetWidth/2),!e.left&&e.right&&(n=t.offsetWidth/2),Object.assign(t.style,{left:`${n}px`,top:`${i}px`})}}))}},createDatePopup=(e,t)=>{var a;e.popups&&(null==(a=Object.entries(e.popups))||a.forEach((([a,i])=>handleDay(e,a,i,t))))},getDate=e=>new Date(`${e}T00:00:00.000Z`),getDateString=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,updateAttribute=(e,t,a,i="")=>{t?e.setAttribute(a,i):e.getAttribute(a)===i&&e.removeAttribute(a)},setDateModifier=(e,t,a,i,n,r,l)=>{var s,o,d,c;const p=getDate(e.private.displayDateMin)>getDate(r)||getDate(e.private.displayDateMax)<getDate(r)||(null==(s=e.private.disableDates)?void 0:s.includes(r))||!e.selectionMonthsMode&&"current"!==l||!e.selectionYearsMode&&getDate(r).getFullYear()!==t;if(updateAttribute(a,p,"data-vc-date-disabled"),i&&updateAttribute(i,p,"aria-disabled","true"),i&&updateAttribute(i,p,"tabindex","-1"),updateAttribute(a,!e.disableToday&&getDateString(e.dateToday)===r,"data-vc-date-today"),updateAttribute(a,!e.disableToday&&getDateString(e.dateToday)===r,"aria-current","date"),updateAttribute(a,null==(o=e.selectedWeekends)?void 0:o.includes(n),"data-vc-date-weekend"),updateAttribute(a,null==(d=e.selectedHolidays)?void 0:d.includes(r),"data-vc-date-holiday"),(null==(c=e.private.selectedDates)?void 0:c.includes(r))?(a.setAttribute("data-vc-date-selected",""),i&&i.setAttribute("aria-selected","true"),e.private.selectedDates.length>1&&"multiple-ranged"===e.selectionDatesMode&&(e.private.selectedDates[0]===r&&a.setAttribute("data-vc-date-selected","first"),e.private.selectedDates[e.private.selectedDates.length-1]===r&&a.setAttribute("data-vc-date-selected","last"),e.private.selectedDates[0]!==r&&e.private.selectedDates[e.private.selectedDates.length-1]!==r&&a.setAttribute("data-vc-date-selected","middle"))):a.hasAttribute("data-vc-date-selected")&&(a.removeAttribute("data-vc-date-selected"),i&&i.removeAttribute("aria-selected")),!e.private.disableDates.includes(r)&&e.enableEdgeDatesOnly&&e.private.selectedDates.length>1&&"multiple-ranged"===e.selectionDatesMode){const t=getDate(e.private.selectedDates[0]),i=getDate(e.private.selectedDates[e.private.selectedDates.length-1]),n=getDate(r);updateAttribute(a,n>t&&n<i,"data-vc-date-selected","middle")}},getLocaleString=(e,t,a)=>new Date(`${e}T00:00:00.000Z`).toLocaleString(t,a),getWeekNumber=(e,t)=>{const a=getDate(e),i=(a.getDay()-t+7)%7;a.setDate(a.getDate()+4-i);const n=new Date(a.getFullYear(),0,1),r=Math.ceil(((+a-+n)/864e5+1)/7);return{year:a.getFullYear(),week:r}},addWeekNumberForDate=(e,t,a)=>{const i=getWeekNumber(a,e.firstWeekday);i&&(t.dataset.vcDateWeekNumber=String(i.week))},setDaysAsDisabled=(e,t,a)=>{var i,n,r,l,s;const o=null==(i=e.disableWeekdays)?void 0:i.includes(a),d=e.disableAllDates&&!!(null==(n=e.private.enableDates)?void 0:n[0]);!o&&!d||(null==(r=e.private.enableDates)?void 0:r.includes(t))||(null==(l=e.private.disableDates)?void 0:l.includes(t))||(e.private.disableDates.push(t),null==(s=e.private.disableDates)||s.sort(((e,t)=>+new Date(e)-+new Date(t))))},createDate=(e,t,a,i,n,r)=>{const l=getDate(n).getDay(),s="string"==typeof e.locale&&e.locale.length?e.locale:"en",o=document.createElement("div");let d;o.className=e.styles.date,o.dataset.vcDate=n,o.dataset.vcDateMonth=r,o.dataset.vcDateWeekDay=String(l),("current"===r||e.displayDatesOutside)&&(d=document.createElement("button"),d.className=e.styles.dateBtn,d.type="button",d.role="gridcell",d.ariaLabel=getLocaleString(n,s,{dateStyle:"long",timeZone:"UTC"}),d.dataset.vcDateBtn="",d.innerText=String(i),o.appendChild(d)),e.enableWeekNumbers&&addWeekNumberForDate(e,o,n),setDaysAsDisabled(e,n,l),setDateModifier(e,t,o,d,l,n,r),a.appendChild(o),e.onCreateDateEls&&e.onCreateDateEls(o,e)},createDatesFromCurrentMonth=(e,t,a,i,n)=>{for(let r=1;r<=a;r++){const a=new Date(i,n,r);createDate(e,i,t,r,getDateString(a),"current")}},createDatesFromNextMonth=(e,t,a,i,n,r)=>{const l=r+a,s=7*Math.ceil(l/7)-l,o=n+1===12?i+1:i,d=n+1===12?"01":n+2<10?`0${n+2}`:n+2;for(let a=1;a<=s;a++){const n=a<10?`0${a}`:String(a);createDate(e,i,t,a,`${o}-${d}-${n}`,"next")}},createDatesFromPrevMonth=(e,t,a,i,n)=>{let r=new Date(a,i,0).getDate()-(n-1);const l=0===i?a-1:a,s=0===i?12:i<10?`0${i}`:i;for(let i=n;i>0;i--,r++){createDate(e,a,t,r,`${l}-${s}-${r}`,"prev")}},createWeekNumbers=(e,t,a,i,n)=>{if(!e.enableWeekNumbers)return;i.textContent="";const r=document.createElement("b");r.className=e.styles.weekNumbersTitle,r.innerText="#",r.dataset.vcWeekNumbers="title",i.appendChild(r);const l=document.createElement("div");l.className=e.styles.weekNumbersContent,l.dataset.vcWeekNumbers="content",i.appendChild(l);const s=document.createElement("button");s.type="button",s.className=e.styles.weekNumber;const o=n.querySelectorAll("[data-vc-date]"),d=Math.ceil((t+a)/7);for(let t=0;t<d;t++){const a=o[0===t?6:7*t].dataset.vcDate,i=getWeekNumber(a,e.firstWeekday);if(!i)return;const n=s.cloneNode(!0);n.innerText=String(i.week),n.dataset.vcWeekNumber=String(i.week),n.dataset.vcWeekYear=String(i.year),n.role="rowheader",n.ariaLabel=`${i.week}`,l.appendChild(n)}},createDates=e=>{const t=new Date(e.private.selectedYear,e.private.selectedMonth,1),a=e.private.mainElement.querySelectorAll('[data-vc="dates"]'),i=e.private.mainElement.querySelectorAll('[data-vc-week="numbers"]');a.forEach(((a,n)=>{e.selectionDatesMode||(a.dataset.vcDatesDisabled=""),a.textContent="";const r=new Date(t);r.setMonth(r.getMonth()+n);const l=r.getMonth(),s=r.getFullYear(),o=(new Date(s,l,1).getDay()-e.firstWeekday+7)%7,d=new Date(s,l+1,0).getDate();createDatesFromPrevMonth(e,a,s,l,o),createDatesFromCurrentMonth(e,a,d,s,l),createDatesFromNextMonth(e,a,d,s,l,o),createDatePopup(e,a),createWeekNumbers(e,o,d,i[n],a)}))},layoutDefault=e=>`\n  <div class="${e.styles.header}" data-vc="header" role="toolbar" aria-label="${e.labels.navigation}">\n    <#ArrowPrev [month] />\n    <div class="${e.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [month] />\n  </div>\n  <div class="${e.styles.wrapper}" data-vc="wrapper">\n    <#WeekNumbers />\n    <div class="${e.styles.content}" data-vc="content">\n      <#Week />\n      <#Dates />\n    </div>\n  </div>\n  <#ControlTime />\n`,layoutMonths=e=>`\n  <div class="${e.styles.header}" data-vc="header" role="toolbar" aria-label="${e.labels.navigation}">\n    <div class="${e.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n  </div>\n  <div class="${e.styles.wrapper}" data-vc="wrapper">\n    <div class="${e.styles.content}" data-vc="content">\n      <#Months />\n    </div>\n  </div>\n`,layoutMultiple=e=>`\n  <div class="${e.styles.controls}" data-vc="controls" role="toolbar" aria-label="${e.labels.navigation}">\n    <#ArrowPrev [month] />\n    <#ArrowNext [month] />\n  </div>\n  <div class="${e.styles.grid}" data-vc="grid">\n    <#Multiple>\n      <div class="${e.styles.column}" data-vc="column" role="region">\n        <div class="${e.styles.header}" data-vc="header">\n          <div class="${e.styles.headerContent}" data-vc-header="content">\n            <#Month />\n            <#Year />\n          </div>\n        </div>\n        <div class="${e.styles.wrapper}" data-vc="wrapper">\n          <#WeekNumbers />\n          <div class="${e.styles.content}" data-vc="content">\n            <#Week />\n            <#Dates />\n          </div>\n        </div>\n      </div>\n    <#/Multiple>\n  </div>\n  <#ControlTime />\n`,layoutYears=e=>`\n  <div class="${e.styles.header}" data-vc="header" role="toolbar" aria-label="${e.labels.navigation}">\n    <#ArrowPrev [year] />\n    <div class="${e.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [year] />\n  </div>\n  <div class="${e.styles.wrapper}" data-vc="wrapper">\n    <div class="${e.styles.content}" data-vc="content">\n      <#Years />\n    </div>\n  </div>\n`,getCorrectNumberOfMonths=e=>"multiple"===e.viewType?1===e.displayMonthsCount?2:e.displayMonthsCount>12?12:e.displayMonthsCount:1,ArrowNext=(e,t)=>`<button type="button" class="${e.styles.arrowNext}" data-vc-arrow="next" aria-label="${e.labels.arrowNext[t]}"></button>`,ArrowPrev=(e,t)=>`<button type="button" class="${e.styles.arrowPrev}" data-vc-arrow="prev" aria-label="${e.labels.arrowPrev[t]}"></button>`,ControlTime=e=>e.selectionTimeMode?`<div class="${e.styles.time}" data-vc="time" role="group" aria-label="${e.labels.selectingTime}"></div>`:"",Dates=e=>`<div class="${e.styles.dates}" data-vc="dates" role="grid" aria-live="assertive" aria-label="${e.labels.dates}" ${"multiple"===e.viewType?"aria-multiselectable":""}></div>`,Month=e=>`<button type="button" class="${e.styles.month}" data-vc="month"></button>`,Months=e=>`<div class="${e.styles.months}" data-vc="months" role="grid" aria-live="assertive" aria-label="${e.labels.months}"></div>`,Week=e=>`<div class="${e.styles.week}" data-vc="week" role="row" aria-label="${e.labels.week}"></div>`,WeekNumbers=e=>e.enableWeekNumbers?`<div class="${e.styles.weekNumbers}" data-vc-week="numbers" role="row" aria-label="${e.labels.weekNumber}"></div>`:"",Year=e=>`<button type="button" class="${e.styles.year}" data-vc="year"></button>`,Years=e=>`<div class="${e.styles.years}" data-vc="years" role="grid" aria-live="assertive" aria-label="${e.labels.years}"></div>`,components={ArrowNext:ArrowNext,ArrowPrev:ArrowPrev,ControlTime:ControlTime,Dates:Dates,Month:Month,Months:Months,Week:Week,WeekNumbers:WeekNumbers,Year:Year,Years:Years},getComponent=e=>components[e],parseLayout=(e,t)=>t.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,((t,a)=>{const i=(a.match(/\[(.*?)\]/)||[])[1],n=a.replace(/[/\s\n\t]|\[(.*?)\]/g,""),r=getComponent(n),l=r?r(e,null!=i?i:null):"";return e.sanitizerHTML(l)})).replace(/[\n\t]/g,""),parseMultipleLayout=(e,t)=>t.replace(new RegExp("<#Multiple>(.*?)<#\\/Multiple>","gs"),((t,a)=>{const i=Array(getCorrectNumberOfMonths(e)).fill(a).join("");return e.sanitizerHTML(i)})).replace(/[\n\t]/g,""),createLayouts=(e,t)=>{const a={default:layoutDefault,month:layoutMonths,year:layoutYears,multiple:layoutMultiple};if(Object.keys(a).forEach((t=>{const i=t;e.layouts[i].length||(e.layouts[i]=a[i](e))})),e.private.mainElement.className=e.styles.calendar,e.private.mainElement.dataset.vc="calendar",e.private.mainElement.dataset.vcType=e.private.currentType,e.private.mainElement.role="application",e.private.mainElement.tabIndex=0,e.private.mainElement.ariaLabel=e.labels.application,"multiple"===e.private.currentType&&getCorrectNumberOfMonths(e))e.private.mainElement.innerHTML=parseMultipleLayout(e,parseLayout(e,e.layouts[e.private.currentType]));else{if("multiple"===e.viewType&&t){const a=e.private.mainElement.querySelector('[data-vc="controls"]'),i=e.private.mainElement.querySelector('[data-vc="grid"]'),n=t.closest('[data-vc="column"]');return a&&e.private.mainElement.removeChild(a),i&&(i.dataset.vcGrid="hidden"),n&&(n.dataset.vcColumn=e.private.currentType),void(n&&(n.innerHTML=parseLayout(e,e.layouts[e.private.currentType])))}e.private.mainElement.innerHTML=parseLayout(e,e.layouts[e.private.currentType])}},setVisibilityArrows=(e,t,a,i)=>{e.style.visibility=a?"hidden":"",t.style.visibility=i?"hidden":""},handleDefaultType=(e,t,a)=>{const i=getDate(getDateString(new Date(e.private.selectedYear,e.private.selectedMonth,1))),n=new Date(i.getTime()),r=new Date(i.getTime());n.setMonth(n.getMonth()-e.monthsToSwitch),r.setMonth(r.getMonth()+e.monthsToSwitch),e.selectionYearsMode||(e.private.dateMin.setFullYear(i.getFullYear()),e.private.dateMax.setFullYear(i.getFullYear()));const l=!e.selectionMonthsMode||n.getFullYear()<e.private.dateMin.getFullYear()||n.getFullYear()===e.private.dateMin.getFullYear()&&n.getMonth()<e.private.dateMin.getMonth(),s=!e.selectionMonthsMode||r.getFullYear()>e.private.dateMax.getFullYear()||r.getFullYear()===e.private.dateMax.getFullYear()&&r.getMonth()>e.private.dateMax.getMonth();setVisibilityArrows(t,a,l,s)},handleYearType=(e,t,a)=>{const i=!!(e.private.dateMin.getFullYear()&&e.private.displayYear-7<=e.private.dateMin.getFullYear()),n=!!(e.private.dateMax.getFullYear()&&e.private.displayYear+7>=e.private.dateMax.getFullYear());setVisibilityArrows(t,a,i,n)},visibilityArrows=e=>{if("month"===e.private.currentType)return;const t=e.private.mainElement.querySelector('[data-vc-arrow="prev"]'),a=e.private.mainElement.querySelector('[data-vc-arrow="next"]');if(!t||!a)return;({default:()=>handleDefaultType(e,t,a),year:()=>handleYearType(e,t,a)})["multiple"===e.private.currentType?"default":e.private.currentType]()},visibilityHandler=(e,t,a,i,n)=>{const r=new Date(i.setFullYear(e.private.selectedYear,e.private.selectedMonth+a)).getFullYear(),l=new Date(i.setMonth(e.private.selectedMonth+a)).getMonth(),s=e.private.locale.months.long[l],o=t.closest('[data-vc="column"]');o&&(o.ariaLabel=`${s} ${r}`);const d={month:{id:l,label:s},year:{id:r,label:r}};t.innerText=String(d[n].label),t.dataset[`vc${n.charAt(0).toUpperCase()+n.slice(1)}`]=String(d[n].id),t.ariaLabel=`${e.labels[n]} ${d[n].label}`;const c={month:e.selectionMonthsMode,year:e.selectionYearsMode},p=!1===c[n]||"only-arrows"===c[n];p&&(t.tabIndex=-1),t.disabled=p},visibilityTitle=e=>{const t=e.private.mainElement.querySelectorAll('[data-vc="month"]'),a=e.private.mainElement.querySelectorAll('[data-vc="year"]'),i=new Date(e.private.selectedYear,e.private.selectedMonth,1);[t,a].forEach((t=>null==t?void 0:t.forEach(((t,a)=>visibilityHandler(e,t,a,i,t.dataset.vc)))))},setYearModifier=(e,t,a,i,n)=>{var r;const l={month:"[data-vc-months-month]",year:"[data-vc-years-year]"},s={month:{selected:"data-vc-months-month-selected",aria:"aria-selected",value:"vcMonthsMonth",selectedProperty:"selectedMonth"},year:{selected:"data-vc-years-year-selected",aria:"aria-selected",value:"vcYearsYear",selectedProperty:"selectedYear"}};n&&(null==(r=e.private.mainElement.querySelectorAll(l[a]))||r.forEach((e=>{e.removeAttribute(s[a].selected),e.removeAttribute(s[a].aria)})),e.private[s[a].selectedProperty]=Number(t.dataset[s[a].value]),visibilityTitle(e),"year"===a&&visibilityArrows(e)),i&&(t.setAttribute(s[a].selected,""),t.setAttribute(s[a].aria,"true"))},relationshipID=e=>{if("multiple"!==e.viewType)return 0;const t=e.private.mainElement.querySelectorAll('[data-vc="column"]'),a=Array.from(t).findIndex((e=>e.closest('[data-vc-column="month"]')));return a>0?a:0},createMonthEl=(e,t,a,i,n,r,l)=>{const s=t.cloneNode(!1);return s.className=e.styles.monthsMonth,s.innerText=i,s.ariaLabel=n,s.role="gridcell",s.dataset.vcMonthsMonth=`${l}`,r&&(s.ariaDisabled="true"),r&&(s.tabIndex=-1),s.disabled=r,setYearModifier(e,s,"month",a===l,!1),s},createMonths=(e,t)=>{var a,i;const n=null==(a=null==t?void 0:t.closest('[data-vc="header"]'))?void 0:a.querySelector('[data-vc="year"]'),r=n?Number(n.dataset.vcYear):e.private.selectedYear,l=(null==t?void 0:t.dataset.vcMonth)?Number(t.dataset.vcMonth):e.private.selectedMonth;e.private.currentType="month",createLayouts(e,t),visibilityTitle(e);const s=e.private.mainElement.querySelector('[data-vc="months"]');if(!e.selectionMonthsMode||!s)return;const o=e.monthsToSwitch>1?e.private.locale.months.long.map(((t,a)=>l-e.monthsToSwitch*a)).concat(e.private.locale.months.long.map(((t,a)=>l+e.monthsToSwitch*a))).filter((e=>e>=0&&e<=12)):Array.from(Array(12).keys()),d=document.createElement("button");d.type="button";for(let t=0;t<12;t++){const a=t<e.private.dateMin.getMonth()+relationshipID(e)&&r<=e.private.dateMin.getFullYear()||t>e.private.dateMax.getMonth()+relationshipID(e)&&r>=e.private.dateMax.getFullYear()||t!==l&&!o.includes(t),i=createMonthEl(e,d,l,e.private.locale.months.short[t],e.private.locale.months.long[t],a,t);s.appendChild(i),e.onCreateMonthEls&&e.onCreateMonthEls(i,e)}null==(i=e.private.mainElement.querySelector("[data-vc-months-month]"))||i.focus()},TimeInput=(e,t,a,i,n)=>`\n  <label class="${t}" data-vc-time-input="${e}">\n    <input type="text" name="${e}" maxlength="2" aria-label="${a[`input${e.charAt(0).toUpperCase()+e.slice(1)}`]}" value="${i}" ${n?"disabled":""}>\n  </label>\n`,TimeRange=(e,t,a,i,n,r,l)=>`\n  <label class="${t}" data-vc-time-range="${e}">\n    <input type="range" name="${e}" min="${i}" max="${n}" step="${r}" aria-label="${a[`range${e.charAt(0).toUpperCase()+e.slice(1)}`]}" value="${l}">\n  </label>\n`,handleActions=(e,t,a,i)=>{({hour:()=>e.private.selectedHours=a,minute:()=>e.private.selectedMinutes=a})[i](),e.private.selectedTime=`${e.private.selectedHours}:${e.private.selectedMinutes}${e.private.selectedKeeping?` ${e.private.selectedKeeping}`:""}`,e.onChangeTime&&e.onChangeTime(t,e,!1),e.isInput&&e.private.inputElement&&e.private.mainElement&&e.onChangeToInput&&e.onChangeToInput(t,e)},transformTime24=(e,t)=>{var a;return(null==(a={0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"00",PM:"12"}}[Number(e)])?void 0:a[t])||String(e)},handleClickKeepingTime=(e,t,a,i,n)=>{const r=r=>{const l="AM"===e.private.selectedKeeping?"PM":"AM",s=transformTime24(e.private.selectedHours,l);Number(s)<=i&&Number(s)>=n?(e.private.selectedKeeping=l,a.value=s,handleActions(e,r,e.private.selectedHours,"hour"),t.ariaLabel=`${e.labels.btnKeeping} ${e.private.selectedKeeping}`,t.innerText=e.private.selectedKeeping):e.onChangeTime&&e.onChangeTime(r,e,!0)};return t.addEventListener("click",r),()=>{t.removeEventListener("click",r)}},transformTime12=e=>({0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(e)]||String(e)),updateInputAndRange=(e,t,a,i)=>{e.value=a,t.value=i},updateKeepingTime$1=(e,t,a)=>{t&&a&&(e.private.selectedKeeping=a,t.innerText=a)},handleInput$1=(e,t,a,i,n,r,l)=>{const s={hour:(s,o,d)=>{if(!e.selectionTimeMode)return;({12:()=>{if(!e.private.selectedKeeping)return;const c=Number(transformTime24(o,e.private.selectedKeeping));if(!(c<=r&&c>=l))return updateInputAndRange(a,t,e.private.selectedHours,e.private.selectedHours),void(e.onChangeTime&&e.onChangeTime(d,e,!0));updateInputAndRange(a,t,transformTime12(o),transformTime24(o,e.private.selectedKeeping)),s>12&&updateKeepingTime$1(e,i,"PM"),handleActions(e,d,transformTime12(o),n)},24:()=>{if(!(s<=r&&s>=l))return updateInputAndRange(a,t,e.private.selectedHours,e.private.selectedHours),void(e.onChangeTime&&e.onChangeTime(d,e,!0));updateInputAndRange(a,t,o,o),handleActions(e,d,o,n)}})[e.selectionTimeMode]()},minute:(i,s,o)=>{if(!(i<=r&&i>=l))return a.value=e.private.selectedMinutes,void(e.onChangeTime&&e.onChangeTime(o,e,!0));a.value=s,t.value=s,handleActions(e,o,s,n)}},o=e=>{const t=Number(a.value),i=a.value.padStart(2,"0");s[n]&&s[n](t,i,e)};return a.addEventListener("change",o),()=>{a.removeEventListener("change",o)}},updateInputAndTime=(e,t,a,i,n)=>{t.value=n,handleActions(e,a,n,i)},updateKeepingTime=(e,t,a)=>{t&&(e.private.selectedKeeping=a,t.innerText=a)},handleRange=(e,t,a,i,n)=>{const r=r=>{const l=Number(t.value),s=t.value.padStart(2,"0"),o="hour"===n,d=24===e.selectionTimeMode,c=l>0&&l<12;o&&!d&&updateKeepingTime(e,i,0===l||c?"AM":"PM"),updateInputAndTime(e,a,r,n,!o||d||c?s:transformTime12(t.value))};return t.addEventListener("input",r),()=>{t.removeEventListener("input",r)}},handleMouseOver=e=>e.setAttribute("data-vc-input-focus",""),handleMouseOut=e=>e.removeAttribute("data-vc-input-focus"),handleTime=(e,t)=>{const a=t.querySelector('[data-vc-time-range="hour"] input[name="hour"]'),i=t.querySelector('[data-vc-time-range="minute"] input[name="minute"]'),n=t.querySelector('[data-vc-time-input="hour"] input[name="hour"]'),r=t.querySelector('[data-vc-time-input="minute"] input[name="minute"]'),l=t.querySelector('[data-vc-time="keeping"]');if(!(a&&i&&n&&r))return;const s=e=>{e.target===a&&handleMouseOver(n),e.target===i&&handleMouseOver(r)},o=e=>{e.target===a&&handleMouseOut(n),e.target===i&&handleMouseOut(r)};return t.addEventListener("mouseover",s),t.addEventListener("mouseout",o),handleInput$1(e,a,n,l,"hour",e.timeMaxHour,e.timeMinHour),handleInput$1(e,i,r,l,"minute",e.timeMaxMinute,e.timeMinMinute),handleRange(e,a,n,l,"hour"),handleRange(e,i,r,l,"minute"),l&&handleClickKeepingTime(e,l,a,e.timeMaxHour,e.timeMinHour),()=>{t.removeEventListener("mouseover",s),t.removeEventListener("mouseout",o)}},createTime=e=>{const t=e.private.mainElement.querySelector('[data-vc="time"]');if(!e.selectionTimeMode||!t)return;const[a,i]=[e.timeMinHour,e.timeMaxHour],[n,r]=[e.timeMinMinute,e.timeMaxMinute],l=e.private.selectedKeeping?transformTime24(e.private.selectedHours,e.private.selectedKeeping):e.private.selectedHours,s="range"===e.timeControls;var o;t.innerHTML=e.sanitizerHTML(`\n    <div class="${e.styles.timeContent}" data-vc-time="content">\n      ${TimeInput("hour",e.styles.timeHour,e.labels,e.private.selectedHours,s)}\n      ${TimeInput("minute",e.styles.timeMinute,e.labels,e.private.selectedMinutes,s)}\n      ${12===e.selectionTimeMode?(o=e.private.selectedKeeping,`<button type="button" class="${e.styles.timeKeeping}" aria-label="${e.labels.btnKeeping} ${o}" data-vc-time="keeping" ${s?"disabled":""}>${o}</button>`):""}\n    </div>\n    <div class="${e.styles.timeRanges}" data-vc-time="ranges">\n      ${TimeRange("hour",e.styles.timeRange,e.labels,a,i,e.timeStepHour,l)}\n      ${TimeRange("minute",e.styles.timeRange,e.labels,n,r,e.timeStepMinute,e.private.selectedMinutes)}\n    </div>\n  `),handleTime(e,t)},createWeek=e=>{const t=e.selectedWeekends?[...e.selectedWeekends]:[],a=[...e.private.locale.weekdays.long].reduce(((a,i,n)=>[...a,{id:n,titleShort:e.private.locale.weekdays.short[n],titleLong:i,isWeekend:t.includes(n)}]),[]),i=[...a.slice(e.firstWeekday),...a.slice(0,e.firstWeekday)];e.private.mainElement.querySelectorAll('[data-vc="week"]').forEach((t=>{const a=document.createElement("button");a.type="button",i.forEach((i=>{const n=a.cloneNode(!0);n.innerText=i.titleShort,n.className=e.styles.weekDay,n.role="columnheader",n.ariaLabel=i.titleLong,n.dataset.vcWeekDay=String(i.id),i.isWeekend&&(n.dataset.vcWeekDayOff=""),t.appendChild(n)}))}))},createYearEl=(e,t,a,i,n)=>{const r=t.cloneNode(!1);return r.className=e.styles.yearsYear,r.innerText=String(n),r.ariaLabel=String(n),r.role="gridcell",r.dataset.vcYearsYear=`${n}`,i&&(r.ariaDisabled="true"),i&&(r.tabIndex=-1),r.disabled=i,setYearModifier(e,r,"year",a===n,!1),r},createYears=(e,t)=>{var a;const i=(null==t?void 0:t.dataset.vcYear)?Number(t.dataset.vcYear):e.private.selectedYear;e.private.currentType="year",createLayouts(e,t),visibilityTitle(e),visibilityArrows(e);const n=e.private.mainElement.querySelector('[data-vc="years"]');if(!e.selectionYearsMode||!n)return;const r="multiple"!==e.viewType||e.private.selectedYear===i?0:1,l=document.createElement("button");l.type="button";for(let t=e.private.displayYear-7;t<e.private.displayYear+8;t++){const a=t<e.private.dateMin.getFullYear()+r||t>e.private.dateMax.getFullYear(),s=createYearEl(e,l,i,a,t);n.appendChild(s),e.onCreateYearEls&&e.onCreateYearEls(s,e)}null==(a=e.private.mainElement.querySelector("[data-vc-years-year]"))||a.focus()},haveListener={value:!1,set:()=>haveListener.value=!0,check:()=>haveListener.value},setTheme=(e,t)=>e.dataset.vcTheme=t,trackChangesThemeInSystemSettings=(e,t)=>{if(setTheme(e.private.mainElement,t.matches?"dark":"light"),"system"!==e.selectedTheme||haveListener.check())return;const a=e=>{const t=document.querySelectorAll('[data-vc="calendar"]');null==t||t.forEach((t=>setTheme(t,e.matches?"dark":"light")))};t.addEventListener?t.addEventListener("change",a):t.addListener(a),haveListener.set()},trackChangesThemeInHTMLElement=(e,t,a)=>{new MutationObserver((i=>{for(let n=0;n<i.length;n++){if(i[n].attributeName===a){const i=t.getAttribute(a);i&&setTheme(e.private.mainElement,i);break}}})).observe(t,{attributes:!0})},detectTheme=(e,t)=>{const a=e.themeAttrDetect?document.querySelector(e.themeAttrDetect):null,i=e.themeAttrDetect.replace(/^.*\[(.+)\]/g,((e,t)=>t));if(!a||"system"===a.getAttribute(i))return void trackChangesThemeInSystemSettings(e,t);const n=a.getAttribute(i);n?(setTheme(e.private.mainElement,n),trackChangesThemeInHTMLElement(e,a,i)):trackChangesThemeInSystemSettings(e,t)},handleTheme=e=>{"not all"!==window.matchMedia("(prefers-color-scheme)").media?"system"===e.selectedTheme?detectTheme(e,window.matchMedia("(prefers-color-scheme: dark)")):setTheme(e.private.mainElement,e.selectedTheme):setTheme(e.private.mainElement,"light")},capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1).replace(/\./,""),getLocaleWeekday=(e,t,a)=>{const i=new Date(`1978-01-0${t+1}T00:00:00.000Z`),n=i.toLocaleString(a,{weekday:"short",timeZone:"UTC"}),r=i.toLocaleString(a,{weekday:"long",timeZone:"UTC"});e.private.locale.weekdays.short.push(capitalizeFirstLetter(n)),e.private.locale.weekdays.long.push(capitalizeFirstLetter(r))},getLocaleMonth=(e,t,a)=>{const i=new Date(`1978-${String(t+1).padStart(2,"0")}-01T00:00:00.000Z`),n=i.toLocaleString(a,{month:"short",timeZone:"UTC"}),r=i.toLocaleString(a,{month:"long",timeZone:"UTC"});e.private.locale.months.short.push(capitalizeFirstLetter(n)),e.private.locale.months.long.push(capitalizeFirstLetter(r))},getLocale=e=>{var t,a,i,n,r,l,s,o;if(!(e.private.locale.weekdays.short[6]&&e.private.locale.weekdays.long[6]&&e.private.locale.months.short[11]&&e.private.locale.months.long[11]))if("string"==typeof e.locale){if("string"==typeof e.locale&&!e.locale.length)throw new Error(errorMessages.notLocale);Array.from({length:7},((t,a)=>getLocaleWeekday(e,a,e.locale))),Array.from({length:12},((t,a)=>getLocaleMonth(e,a,e.locale)))}else{if(!((null==(a=null==(t=e.locale)?void 0:t.weekdays)?void 0:a.short[6])&&(null==(n=null==(i=e.locale)?void 0:i.weekdays)?void 0:n.long[6])&&(null==(l=null==(r=e.locale)?void 0:r.months)?void 0:l.short[11])&&(null==(o=null==(s=e.locale)?void 0:s.months)?void 0:o.long[11])))throw new Error(errorMessages.notLocale);e.private.locale=__spreadValues({},e.locale)}},create=e=>{const t={default:()=>{createWeek(e),createDates(e)},multiple:()=>{createWeek(e),createDates(e)},month:()=>createMonths(e),year:()=>createYears(e)};handleTheme(e),getLocale(e),createLayouts(e),visibilityTitle(e),visibilityArrows(e),createTime(e),t[e.private.currentType]()},handleArrowKeys=e=>{const t=()=>Array.from(e.private.mainElement.querySelectorAll('[data-vc="calendar"] button'));let a=0;const i={ArrowUp:(e,t)=>Math.max(0,e-t),ArrowDown:(e,a)=>Math.min(t().length-1,e+a),ArrowLeft:e=>Math.max(0,e-1),ArrowRight:e=>Math.min(t().length-1,e+1)},n=e=>{var n,r;if(!i[e.key]||"button"!==(null==(n=e.target)?void 0:n.localName))return;const l=t(),s=l[a].hasAttribute("data-vc-date-btn")?7:l[a].hasAttribute("data-vc-months-month")?4:l[a].hasAttribute("data-vc-years-year")?5:1;a=i[e.key](a,s),null==(r=l[a])||r.focus()};return e.private.mainElement.addEventListener("keydown",n),()=>{e.private.mainElement.removeEventListener("keydown",n)}},handleMonth=(e,t)=>{const a=getDate(getDateString(new Date(e.private.selectedYear,e.private.selectedMonth,1)));({prev:()=>a.setMonth(a.getMonth()-e.monthsToSwitch),next:()=>a.setMonth(a.getMonth()+e.monthsToSwitch)})[t](),[e.private.selectedMonth,e.private.selectedYear]=[a.getMonth(),a.getFullYear()],visibilityTitle(e),visibilityArrows(e),createDates(e)},handleClickArrow=(e,t)=>{const a=t.target.closest("[data-vc-arrow]");a&&(["default","multiple"].includes(e.private.currentType)?handleMonth(e,a.dataset.vcArrow):"year"===e.private.currentType&&void 0!==e.private.displayYear&&(e.private.displayYear+={prev:-15,next:15}[a.dataset.vcArrow],createYears(e,t.target)),e.onClickArrow&&e.onClickArrow(t,e))},canToggleSelection=e=>void 0===e.enableDateToggle||("function"==typeof e.enableDateToggle?e.enableDateToggle(e):e.enableDateToggle),handleSelectDate=(e,t,a)=>{const i=t.dataset.vcDate,n=t.closest("[data-vc-date][data-vc-date-selected]"),r=canToggleSelection(e);n&&!r||(e.private.selectedDates=n?e.private.selectedDates.filter((e=>e!==i)):a?[...e.private.selectedDates,i]:[i])},parseDates=e=>e.reduce(((e,t)=>{if(t instanceof Date||"number"==typeof t){const a=t instanceof Date?t:new Date(t);e.push(a.toISOString().substring(0,10))}else t.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(t):t.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,((t,a,i)=>{const n=getDate(a),r=getDate(i),l=new Date(n.getTime());for(;l<=r;l.setDate(l.getDate()+1))e.push(getDateString(l));return t}));return e}),[]),current={self:null,rangeMin:void 0,rangeMax:void 0},removeHoverEffect=()=>{var e,t;if(!(null==(t=null==(e=current.self)?void 0:e.private)?void 0:t.mainElement))return;current.self.private.mainElement.querySelectorAll("[data-vc-date]").forEach((e=>["data-vc-date-hover","data-vc-date-hover-first","data-vc-date-hover-last"].forEach((t=>e.removeAttribute(t)))))},addHoverEffect=(e,t,a)=>{var i,n,r;if(!(null==(n=null==(i=current.self)?void 0:i.private)?void 0:n.selectedDates))return;const l=getDateString(e);if(null==(r=current.self.private.disableDates)?void 0:r.includes(l))return;const s=current.self.private.mainElement.querySelectorAll(`[data-vc-date="${l}"]`);null==s||s.forEach((e=>e.dataset.vcDateHover="")),t.forEach((e=>e.dataset.vcDateHoverFirst="")),a.forEach((e=>e.dataset.vcDateHoverLast=""))},handleHoverDatesEvent=e=>{var t,a;if(!e.target||!(null==(a=null==(t=current.self)?void 0:t.private)?void 0:a.selectedDates))return;if(!e.target.closest('[data-vc="dates"]'))return void removeHoverEffect();const i=e.target.closest("[data-vc-date]");if(!i)return;const n=i.dataset.vcDate,r=getDate(current.self.private.selectedDates[0]),l=getDate(n),s=current.self.private.mainElement.querySelectorAll(`[data-vc-date="${current.self.private.selectedDates[0]}"]`),o=current.self.private.mainElement.querySelectorAll(`[data-vc-date="${n}"]`),[d,c]=r<l?[s,o]:[o,s],[p,u]=r<l?[r,l]:[l,r];removeHoverEffect();for(let e=new Date(p);e<=u;e.setDate(e.getDate()+1))addHoverEffect(e,d,c)},handleCancelSelectionDates=e=>{current.self&&"Escape"===e.key&&(current.self.private.selectedDates=[],current.self.private.mainElement.removeEventListener("mousemove",handleHoverDatesEvent),document.removeEventListener("keydown",handleCancelSelectionDates),create(current.self))},updateDisabledDates=()=>{var e,t,a,i;if(!(null==(a=null==(t=null==(e=current.self)?void 0:e.private)?void 0:t.selectedDates)?void 0:a[0])||!(null==(i=current.self.private.disableDates)?void 0:i[0]))return;const n=getDate(current.self.private.selectedDates[0]),[r,l]=current.self.private.disableDates.map((e=>getDate(e))).reduce((([e,t],a)=>[n>=a?a:e,n<a&&null===t?a:t]),[null,null]);r&&(current.self.private.displayDateMin=getDateString(new Date(r.setDate(r.getDate()+1)))),l&&(current.self.private.displayDateMax=getDateString(new Date(l.setDate(l.getDate()-1))))},resetDisabledDates=()=>{current.self&&(current.self.private.displayDateMin=current.rangeMin,current.self.private.displayDateMax=current.rangeMax)},handleSelectDateRange=(e,t)=>{var a;if(t){const i=1===e.private.selectedDates.length&&e.private.selectedDates[0].includes(t);e.private.selectedDates=i&&!canToggleSelection(e)?[t,t]:i&&canToggleSelection(e)?[]:e.private.selectedDates.length>1?[t]:[...e.private.selectedDates,t],null==(a=e.private.selectedDates)||a.sort(((e,t)=>+new Date(e)-+new Date(t)))}e.disableDatesGaps&&(current.rangeMin=current.rangeMin?current.rangeMin:e.private.displayDateMin,current.rangeMax=current.rangeMax?current.rangeMax:e.private.displayDateMax),current.self=e,removeHoverEffect();({set:()=>{e.private.mainElement.addEventListener("mousemove",handleHoverDatesEvent),e.private.mainElement.addEventListener("keydown",handleCancelSelectionDates),e.disableDatesGaps&&updateDisabledDates()},reset:()=>{const[t,a]=[e.private.selectedDates[0],e.private.selectedDates[e.private.selectedDates.length-1]],i=e.private.selectedDates[0]!==e.private.selectedDates[e.private.selectedDates.length-1],n=parseDates([`${t}:${a}`]).filter((t=>!e.private.disableDates.includes(t)));e.private.selectedDates=i?e.enableEdgeDatesOnly?[t,a]:n:[e.private.selectedDates[0],e.private.selectedDates[0]],e.private.mainElement.removeEventListener("mousemove",handleHoverDatesEvent),e.private.mainElement.removeEventListener("keydown",handleCancelSelectionDates),e.disableDatesGaps&&resetDisabledDates()}})[1===e.private.selectedDates.length?"set":"reset"]()},updateDateModifier=e=>{e.private.mainElement.querySelectorAll("[data-vc-date]").forEach((t=>{const a=t.querySelector("[data-vc-date-btn]"),i=t.dataset.vcDate,n=getDate(i).getDay();setDateModifier(e,e.private.selectedYear,t,a,n,i,"current")}))},handleClickDate=(e,t)=>{var a;const i=t.target,n=i.closest("[data-vc-date-btn]");if(!e.selectionDatesMode||!["single","multiple","multiple-ranged"].includes(e.selectionDatesMode)||!n)return;const r=n.closest("[data-vc-date]");({single:()=>handleSelectDate(e,r,!1),multiple:()=>handleSelectDate(e,r,!0),"multiple-ranged":()=>handleSelectDateRange(e,r.dataset.vcDate)})[e.selectionDatesMode](),null==(a=e.private.selectedDates)||a.sort(((e,t)=>+new Date(e)-+new Date(t))),e.onClickDate&&e.onClickDate(t,e),e.isInput&&e.private.inputElement&&e.private.mainElement&&e.onChangeToInput&&e.onChangeToInput(t,e);const l=i.closest('[data-vc-date-month="prev"]'),s=i.closest('[data-vc-date-month="next"]');({prev:()=>e.enableMonthChangeOnDayClick?handleMonth(e,"prev"):updateDateModifier(e),next:()=>e.enableMonthChangeOnDayClick?handleMonth(e,"next"):updateDateModifier(e),current:()=>updateDateModifier(e)})[l?"prev":s?"next":"current"]()},typeClick=["month","year"],getColumnID=(e,t,a)=>{const i=e.private.mainElement.querySelectorAll('[data-vc="column"]'),n=Array.from(i).findIndex((e=>e.closest(`[data-vc-column="${t}"]`))),r=Number(i[n].querySelector(`[data-vc="${t}"]`).getAttribute(`data-vc-${t}`));return"month"===e.private.currentType&&n>=0?a-n:"year"===e.private.currentType&&e.private.selectedYear!==r?a-1:a},handleMultipleYearSelection=(e,t)=>{const a=getColumnID(e,"year",Number(t.dataset.vcYearsYear)),i=e.private.selectedMonth<e.private.dateMin.getMonth()&&a<=e.private.dateMin.getFullYear(),n=e.private.selectedMonth>e.private.dateMax.getMonth()&&a>=e.private.dateMax.getFullYear(),r=a<e.private.dateMin.getFullYear(),l=a>e.private.dateMax.getFullYear();e.private.selectedYear=i||r?e.private.dateMin.getFullYear():n||l?e.private.dateMax.getFullYear():a,e.private.selectedMonth=i||r?e.private.dateMin.getMonth():n||l?e.private.dateMax.getMonth():e.private.selectedMonth},handleMultipleMonthSelection=(e,t)=>{const a=t.closest('[data-vc-column="month"]').querySelector('[data-vc="year"]'),i=getColumnID(e,"month",Number(t.dataset.vcMonthsMonth)),n=Number(a.dataset.vcYear),r=i<e.private.dateMin.getMonth()&&n<=e.private.dateMin.getFullYear(),l=i>e.private.dateMax.getMonth()&&n>=e.private.dateMax.getFullYear();e.private.selectedYear=n,e.private.selectedMonth=r?e.private.dateMin.getMonth():l?e.private.dateMax.getMonth():i},handleItemClick=(e,t,a,i)=>{var n;({year:()=>{if("multiple"===e.viewType)return handleMultipleYearSelection(e,i);e.private.selectedYear=Number(i.dataset.vcYearsYear)},month:()=>{if("multiple"===e.viewType)return handleMultipleMonthSelection(e,i);e.private.selectedMonth=Number(i.dataset.vcMonthsMonth)}})[a]();({year:()=>{var a;return null==(a=e.onClickYear)?void 0:a.call(e,t,e)},month:()=>{var a;return null==(a=e.onClickMonth)?void 0:a.call(e,t,e)}})[a](),e.private.currentType!==e.viewType?(e.private.currentType=e.viewType,create(e),null==(n=e.private.mainElement.querySelector(`[data-vc="${a}"]`))||n.focus()):setYearModifier(e,i,a,!0,!0)},handleClickType=(e,t,a)=>{var i;const n=t.target,r=n.closest(`[data-vc="${a}"]`),l={year:()=>createYears(e,n),month:()=>createMonths(e,n)};if(r&&e.onClickTitle&&e.onClickTitle(t,e),r&&e.private.currentType!==a)return l[a]();const s=n.closest(`[data-vc-${a}s-${a}]`);if(s)return handleItemClick(e,t,a,s);const o=n.closest('[data-vc="grid"]'),d=n.closest('[data-vc="column"]');(e.private.currentType===a&&r||"multiple"===e.viewType&&e.private.currentType===a&&o&&!d)&&(e.private.currentType=e.viewType,create(e),null==(i=e.private.mainElement.querySelector(`[data-vc="${a}"]`))||i.focus())},handleClickMonthOrYear=(e,t)=>{const a={month:e.selectionMonthsMode,year:e.selectionYearsMode};typeClick.forEach((i=>{a[i]&&t.target&&handleClickType(e,t,i)}))},handleClickWeekNumber=(e,t)=>{if(!e.enableWeekNumbers||!e.onClickWeekNumber)return;const a=t.target.closest("[data-vc-week-number]"),i=e.private.mainElement.querySelectorAll("[data-vc-date-week-number]");if(!a||!i[0])return;const n=Number(a.innerText),r=Number(a.dataset.vcWeekYear),l=Array.from(i).filter((e=>Number(e.dataset.vcDateWeekNumber)===n));e.onClickWeekNumber(t,n,l,r,e)},handleClickWeekDay=(e,t)=>{if(!e.onClickWeekDay)return;const a=t.target.closest("[data-vc-week-day]"),i=t.target.closest('[data-vc="column"]'),n=i?i.querySelectorAll("[data-vc-date-week-day]"):e.private.mainElement.querySelectorAll("[data-vc-date-week-day]");if(!a||!n[0])return;const r=Number(a.dataset.vcWeekDay),l=Array.from(n).filter((e=>Number(e.dataset.vcDateWeekDay)===r));e.onClickWeekDay(t,r,l,e)},handleClick=e=>{const t=t=>{handleClickArrow(e,t),handleClickWeekDay(e,t),handleClickWeekNumber(e,t),handleClickDate(e,t),handleClickMonthOrYear(e,t)};return e.private.mainElement.addEventListener("click",t),()=>e.private.mainElement.removeEventListener("click",t)},initDateMinMax=e=>{e.private.dateMin=e.displayDisabledDates?getDate(e.dateMin):getDate(e.private.displayDateMin),e.private.dateMax=e.displayDisabledDates?getDate(e.dateMax):getDate(e.private.displayDateMax)},getLocalDate=()=>{const e=new Date;return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().substring(0,10)},initRange=e=>{var t,a,i;"today"===e.dateMin&&(e.dateMin=getLocalDate()),"today"===e.dateMax&&(e.dateMax=getLocalDate()),"today"===e.displayDateMin&&(e.displayDateMin=getLocalDate()),"today"===e.displayDateMax&&(e.displayDateMax=getLocalDate()),e.displayDateMin=e.displayDateMin?getDate(e.dateMin)>=getDate(e.displayDateMin)?e.dateMin:e.displayDateMin:e.dateMin,e.displayDateMax=e.displayDateMax?getDate(e.dateMax)<=getDate(e.displayDateMax)?e.dateMax:e.displayDateMax:e.dateMax;const n=e.disableDatesPast&&!e.disableAllDates&&getDate(e.displayDateMin)<e.dateToday;e.private.displayDateMin=n||e.disableAllDates?getDateString(e.dateToday):e.displayDateMin,e.private.displayDateMax=e.disableAllDates?getDateString(e.dateToday):e.displayDateMax,e.private.disableDates=e.disableDates&&!e.disableAllDates?parseDates(e.disableDates):e.disableAllDates?[e.private.displayDateMin]:[],e.private.disableDates.length>1&&e.private.disableDates.sort(((e,t)=>+new Date(e)-+new Date(t))),e.private.enableDates=e.enableDates?parseDates(e.enableDates):[],(null==(t=e.private.enableDates)?void 0:t[0])&&(null==(a=e.private.disableDates)?void 0:a[0])&&(e.private.disableDates=e.private.disableDates.filter((t=>!e.private.enableDates.includes(t)))),e.private.enableDates.length>1&&e.private.enableDates.sort(((e,t)=>+new Date(e)-+new Date(t))),(null==(i=e.private.enableDates)?void 0:i[0])&&e.disableAllDates&&(e.private.displayDateMin=e.private.enableDates[0],e.private.displayDateMax=e.private.enableDates[e.private.enableDates.length-1])},initSelectedDates=e=>{var t;e.private.selectedDates=(null==(t=e.selectedDates)?void 0:t[0])?parseDates(e.selectedDates):[]},initSelectedMonthYear=e=>{var t;if(e.enableJumpToSelectedDate&&(null==(t=e.selectedDates)?void 0:t.length)&&void 0===e.selectedMonth&&void 0===e.selectedYear){const t=getDate(parseDates(e.selectedDates)[0]);e.selectedMonth=t.getMonth(),e.selectedYear=t.getFullYear()}const a=void 0!==e.selectedMonth&&Number(e.selectedMonth)>=0&&Number(e.selectedMonth)<12,i=void 0!==e.selectedYear&&Number(e.selectedYear)>=0&&Number(e.selectedYear)<=9999;e.private.selectedMonth=a?Number(e.selectedMonth):e.dateToday.getMonth(),e.private.selectedYear=i?Number(e.selectedYear):e.dateToday.getFullYear(),e.private.displayYear=e.private.selectedYear},initTime=e=>{var t,a,i;if(!e.selectionTimeMode)return;if(![12,24].includes(e.selectionTimeMode))throw new Error(errorMessages.incorrectTime);const n=12===e.selectionTimeMode,r=n?/^(0[1-9]|1[0-2]):([0-5][0-9]) ?(AM|PM)?$/i:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;let[l,s,o]=null!=(i=null==(a=null==(t=e.selectedTime)?void 0:t.match(r))?void 0:a.slice(1))?i:[];l?n&&!o&&(o="AM"):(l=n?transformTime12(String(e.timeMinHour)):String(e.timeMinHour),s=String(e.timeMinMinute),o=n?Number(transformTime12(String(e.timeMinHour)))>=12?"PM":"AM":null),e.private.selectedHours=l.padStart(2,"0"),e.private.selectedMinutes=s.padStart(2,"0"),e.private.selectedKeeping=o,e.private.selectedTime=`${e.private.selectedHours}:${e.private.selectedMinutes}${o?` ${o}`:""}`},initAllVariables=e=>{e.private.currentType=e.viewType,initSelectedMonthYear(e),initRange(e),initSelectedDates(e),initDateMinMax(e),initTime(e)},reset=(e,{year:t,month:a,dates:i,time:n,locale:r})=>{var l;const s={year:e.selectedYear,month:e.selectedMonth,dates:e.selectedDates,time:e.selectedTime};e.selectedYear=t?s.year:e.private.selectedYear,e.selectedMonth=a?s.month:e.private.selectedMonth,e.selectedTime=n?s.time:e.private.selectedTime,e.selectedDates="only-first"===i&&(null==(l=e.private.selectedDates)?void 0:l[0])?[e.private.selectedDates[0]]:!0===i?s.dates:e.private.selectedDates,r&&(e.private.locale={months:{short:[],long:[]},weekdays:{short:[],long:[]}}),initAllVariables(e),create(e),e.selectedYear=s.year,e.selectedMonth=s.month,e.selectedDates=s.dates,e.selectedTime=s.time,"multiple-ranged"===e.selectionDatesMode&&i&&handleSelectDateRange(e)};function findBestPickerPosition(e,t){const a="left";if(!t||!e)return a;const{canShow:i,parentPositions:n}=getAvailablePosition(e,t),r=i.left&&i.right;return(r&&i.bottom?"center":r&&i.top?["top","center"]:Array.isArray(n)?["bottom"===n[0]?"top":"bottom",...n.slice(1)]:n)||a}const setPosition=(e,t,a)=>{if(!e)return;const i="auto"===a?findBestPickerPosition(e,t):a,n={top:-t.offsetHeight,bottom:e.offsetHeight,left:0,center:e.offsetWidth/2-t.offsetWidth/2,right:e.offsetWidth-t.offsetWidth},r=Array.isArray(i)?i[0]:"bottom",l=Array.isArray(i)?i[1]:i;t.dataset.vcPosition=r;const{top:s,left:o}=getOffset(e),d=s+n[r];let c=o+n[l];const{vw:p}=getViewportDimensions();if(c+t.clientWidth>p){const e=window.innerWidth-document.body.clientWidth;c=p-t.clientWidth-e}else c<0&&(c=0);Object.assign(t.style,{left:`${c}px`,top:`${d}px`})},createToInput=(e,t=!0)=>{const a=document.createElement("div");return a.className=e.styles.calendar,a.dataset.vc="calendar",a.dataset.vcInput="",a.dataset.vcCalendarHidden="",a.style.visibility="hidden",e.private.isInputInit=!0,e.private.mainElement=a,document.body.appendChild(e.private.mainElement),t&&queueMicrotask((()=>{setPosition(e.private.inputElement,a,e.positionToInput),e.private.mainElement.style.visibility="visible",e.show()})),reset(e,{year:!0,month:!0,dates:!0,time:!0,locale:!0}),e.onInit&&e.onInit(e),handleArrowKeys(e),handleClick(e)},handleInput=e=>{const t=[];e.private.inputElement=e.private.mainElement;const a=()=>setPosition(e.private.inputElement,e.private.mainElement,e.positionToInput),i=t=>{var a,n;"Escape"===t.key&&((null==(a=null==e?void 0:e.private)?void 0:a.inputElement)&&(null==(n=null==e?void 0:e.private)?void 0:n.mainElement)&&e.hide(),document.removeEventListener("keydown",i))},n=t=>{e&&t.target!==e.private.inputElement&&!e.private.mainElement.contains(t.target)&&(e.private.inputElement&&e.private.mainElement&&e.hide(),window.removeEventListener("resize",a),document.removeEventListener("click",n,{capture:!0}))},r=()=>{e.private.isInputInit?(setPosition(e.private.inputElement,e.private.mainElement,e.positionToInput),e.private.mainElement.style.visibility="visible",e.show()):t.push(createToInput(e)),window.addEventListener("resize",a),document.addEventListener("click",n,{capture:!0}),document.addEventListener("keydown",i)};return e.private.inputElement.addEventListener("click",r),e.private.inputElement.addEventListener("focus",r),()=>{t.forEach((e=>e()))}},init=e=>(e.private.originalElement=e.private.mainElement.cloneNode(!0),e.private.isInit=!0,e.isInput?handleInput(e):(initAllVariables(e),create(e),e.onInit&&e.onInit(e),handleArrowKeys(e),handleClick(e))),replaceProperties=(e,t)=>{const a=Object.keys(t);for(let i=0;i<a.length;i++){const n=a[i];"object"!=typeof e[n]||"object"!=typeof t[n]||t[n]instanceof Date||Array.isArray(t[n])?void 0!==t[n]&&(e[n]=t[n]):replaceProperties(e[n],t[n])}},set=(e,t,a)=>{replaceProperties(e,t),reset(e,__spreadValues(__spreadValues({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),a))},show=e=>{e.private.currentType?(e.private.mainElement.removeAttribute("data-vc-calendar-hidden"),e.onShow&&e.onShow(e)):e.private.mainElement.click()},update=(e,t)=>{if(!e.private.isInit)throw new Error(errorMessages.notInit);e.isInput&&!e.private.isInputInit&&createToInput(e,!1);reset(e,__spreadValues(__spreadValues({},{year:!1,month:!1,dates:!1,time:!1,locale:!1}),t)),e.onUpdate&&e.onUpdate(e)},labels={application:"Calendar",navigation:"Calendar Navigation",arrowNext:{month:"Next month",year:"Next list of years"},arrowPrev:{month:"Previous month",year:"Previous list of years"},month:"Select month, current selected month:",months:"List of months",year:"Select year, current selected year:",years:"List of years",week:"Days of the week",weekNumber:"Numbers of weeks in a year",dates:"Dates in the current month",selectingTime:"Selecting a time ",inputHour:"Hours",inputMinute:"Minutes",rangeHour:"Slider for selecting hours",rangeMinute:"Slider for selecting minutes",btnKeeping:"Switch AM/PM, current position:"},styles={calendar:"vc",controls:"vc-controls",grid:"vc-grid",column:"vc-column",header:"vc-header",headerContent:"vc-header__content",month:"vc-month",year:"vc-year",arrowPrev:"vc-arrow vc-arrow_prev",arrowNext:"vc-arrow vc-arrow_next",wrapper:"vc-wrapper",content:"vc-content",months:"vc-months",monthsMonth:"vc-months__month",years:"vc-years",yearsYear:"vc-years__year",week:"vc-week",weekDay:"vc-week__day",weekNumbers:"vc-week-numbers",weekNumbersTitle:"vc-week-numbers__title",weekNumbersContent:"vc-week-numbers__content",weekNumber:"vc-week-number",dates:"vc-dates",date:"vc-date",dateBtn:"vc-date__btn",datePopup:"vc-date__popup",time:"vc-time",timeContent:"vc-time__content",timeHour:"vc-time__hour",timeMinute:"vc-time__minute",timeKeeping:"vc-time__keeping",timeRanges:"vc-time__ranges",timeRange:"vc-time__range"};class OptionsCalendar{constructor(){__publicField(this,"viewType","default"),__publicField(this,"isInput",!1),__publicField(this,"positionToInput","left"),__publicField(this,"firstWeekday",1),__publicField(this,"monthsToSwitch",1),__publicField(this,"themeAttrDetect","html[data-theme]"),__publicField(this,"locale","en"),__publicField(this,"dateToday",new Date),__publicField(this,"dateMin","1970-01-01"),__publicField(this,"dateMax","2470-12-31"),__publicField(this,"displayMonthsCount",2),__publicField(this,"displayDateMin"),__publicField(this,"displayDateMax"),__publicField(this,"displayDatesOutside",!0),__publicField(this,"displayDisabledDates",!1),__publicField(this,"disableDates",[]),__publicField(this,"disableAllDates",!1),__publicField(this,"disableDatesPast",!1),__publicField(this,"disableDatesGaps",!1),__publicField(this,"disableWeekdays",[]),__publicField(this,"disableToday",!1),__publicField(this,"enableDates",[]),__publicField(this,"enableEdgeDatesOnly",!0),__publicField(this,"enableDateToggle",!0),__publicField(this,"enableWeekNumbers",!1),__publicField(this,"enableMonthChangeOnDayClick",!0),__publicField(this,"enableJumpToSelectedDate",!1),__publicField(this,"selectionDatesMode","single"),__publicField(this,"selectionMonthsMode",!0),__publicField(this,"selectionYearsMode",!0),__publicField(this,"selectionTimeMode",!1),__publicField(this,"selectedDates",[]),__publicField(this,"selectedMonth"),__publicField(this,"selectedYear"),__publicField(this,"selectedHolidays",[]),__publicField(this,"selectedWeekends",[0,6]),__publicField(this,"selectedTime"),__publicField(this,"selectedTheme","system"),__publicField(this,"timeMinHour",0),__publicField(this,"timeMaxHour",23),__publicField(this,"timeMinMinute",0),__publicField(this,"timeMaxMinute",59),__publicField(this,"timeControls","all"),__publicField(this,"timeStepHour",1),__publicField(this,"timeStepMinute",1),__publicField(this,"sanitizerHTML",(e=>e)),__publicField(this,"onClickDate"),__publicField(this,"onClickWeekDay"),__publicField(this,"onClickWeekNumber"),__publicField(this,"onClickTitle"),__publicField(this,"onClickMonth"),__publicField(this,"onClickYear"),__publicField(this,"onClickArrow"),__publicField(this,"onChangeTime"),__publicField(this,"onChangeToInput"),__publicField(this,"onCreateDateEls"),__publicField(this,"onCreateMonthEls"),__publicField(this,"onCreateYearEls"),__publicField(this,"onInit"),__publicField(this,"onUpdate"),__publicField(this,"onDestroy"),__publicField(this,"onShow"),__publicField(this,"onHide"),__publicField(this,"popups",{}),__publicField(this,"labels",__spreadValues({},labels)),__publicField(this,"layouts",{default:"",multiple:"",month:"",year:""}),__publicField(this,"styles",__spreadValues({},styles))}}const _VanillaCalendarPro=class e extends OptionsCalendar{constructor(t,a){var i;super(),__publicField(this,"init",(()=>init(this))),__publicField(this,"update",(e=>update(this,e))),__publicField(this,"destroy",(()=>destroy(this))),__publicField(this,"show",(()=>show(this))),__publicField(this,"hide",(()=>hide(this))),__publicField(this,"set",((e,t)=>set(this,e,t))),__publicField(this,"private"),this.private=__spreadProps(__spreadValues({},this.private),{locale:{months:{short:[],long:[]},weekdays:{short:[],long:[]}}}),this.private.mainElement="string"==typeof t?null!=(i=e.memoizedElements.get(t))?i:this.queryAndMemoize(t):t,a&&replaceProperties(this,a)}queryAndMemoize(t){const a=document.querySelector(t);if(!a)throw new Error(errorMessages.notFoundSelector(t));return e.memoizedElements.set(t,a),a}};__publicField(_VanillaCalendarPro,"memoizedElements",new Map);let VanillaCalendarPro=_VanillaCalendarPro;export{VanillaCalendarPro};